## AWS Graylog

This repo provides a terraform configuration to raise a Graylog Server automated.

### Environment:

Terraform configuration is using `TF_VAR` so you need do as follows:

*   Create a `.env` file the same way `env.example`.

    `TF_VAR_AWS_KEY=[YOUR_KEY]
    TF_VAR_AWS_SECRET=[YOUR_SECRET]
    TF_VAR_AWS_REGION=[DESIRED_REGION]
    TF_VAR_AWS_AVAILABILITY_ZONE=[DESIRED_AZ]
    TF_VAR_VPC_ID=[YOUR_VPC_ID]
    TF_VAR_SSH_PRIVATE_KEY=[PATH_TO_YOUR_PRIVATE_KEY]
    TF_VAR_SSH_PUBLIC_KEY=[PATH_TO_YOUR_PUBLIC_KEY]`
    
*   The `.env` file must have an empty line after the last var (issue to be corrected in next version)
   
### Usage:
   
Inside the project root, you'll find a `init.sh` file, this file abstracts the basic terraform commands.

The available commands are:

*   `./init --generate-work-dir`: Generates a bundle `terraformWorkDir` where you can edit the .tf files, in case you want to modify something for your own purpose.
*   `./init --clean-work-dir`: Clean the working directory generated by `--generate-work-dir`.
*   `./init --provision`: Bundles all terraform config files and execute `terraform apply`. ps: it cleans the work dir after the execution.
*   `./init --destroy`: Destroy the provisioned infrastructure. 